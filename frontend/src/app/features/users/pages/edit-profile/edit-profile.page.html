<div class="edit-profile-container">
  <div class="header">
    <h2 class="page-title">Editar Perfil</h2>
    
    <div class="photo-section">
      <div class="photo-container">
        @if (photoPreview) {
          <img [src]="photoPreview" alt="Foto de perfil" class="photo-preview" />
        } @else {
          <div class="photo-placeholder">
            <span>{{ editForm.value.name?.charAt(0).toUpperCase() || 'U' }}</span>
          </div>
        }
      </div>
      <label for="photo-input" class="change-photo-btn">
        Alterar foto
      </label>
      <input
        id="photo-input"
        type="file"
        accept="image/*"
        (change)="onFileSelected($event)"
        class="file-input"
      />
    </div>
  </div>

  <div class="content">
    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="edit-form">
      <div class="form-group">
        <label for="name">Nome completo</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          placeholder="Digite seu nome"
          class="input-field"
        />
      </div>

      <div class="form-group">
        <label for="email">E-mail</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          placeholder="Digite seu e-mail"
          class="input-field"
        />
      </div>

      <div class="form-group">
        <label for="password">Nova senha</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          placeholder="Digite uma nova senha"
          class="input-field"
        />
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmar nova senha</label>
        <input
          id="confirmPassword"
          type="password"
          formControlName="confirmPassword"
          placeholder="Confirme a nova senha"
          class="input-field"
        />
      </div>

      @if (editForm.get('confirmPassword')?.hasError('passwordMismatch') && editForm.get('confirmPassword')?.touched) {
        <app-error-message message="As senhas nÃ£o coincidem" />
      }

      @if (errorMessage) {
        <app-error-message [message]="errorMessage" />
      }

      <div class="buttons">
        <app-button
          text="Salvar"
          loadingText="Salvando..."
          [isLoading]="isLoading"
          [disabled]="editForm.invalid"
          type="submit"
        />
        <app-button
          text="Remover perfil"
          loadingText="Removendo..."
          [isLoading]="isLoading"
          type="button"
          variant="danger"
          (clicked)="onDelete()"
        />
      </div>
    </form>
  </div>

  <app-navigation />
</div>
