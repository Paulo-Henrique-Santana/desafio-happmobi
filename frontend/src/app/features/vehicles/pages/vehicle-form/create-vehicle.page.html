<div class="create-vehicle-container">
  <div class="page-header page-header--flex">
    <button class="back-button" (click)="goBack()">‚Üê Voltar</button>
    <h2 class="page-title">{{ isEditMode ? 'Editar Ve√≠culo' : 'Cadastrar Ve√≠culo' }}</h2>
  </div>

  <div class="content">
    <div class="form-card">
      <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="vehicle-form">
        <div class="photo-upload">
          <label for="photo-input" class="photo-label">
            @if (photoPreview) {
              <img [src]="photoPreview" alt="Preview" class="photo-preview" />
            } @else {
              <div class="photo-placeholder">
                <span>üì∑</span>
                <p>Adicionar foto</p>
              </div>
            }
          </label>
          <input
            id="photo-input"
            type="file"
            accept="image/*"
            (change)="onFileSelected($event)"
            class="photo-input"
          />
        </div>

        <div class="form-group">
          <label for="name">Nome do Ve√≠culo</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            placeholder="Digite o nome"
            class="input-field"
          />
        </div>

        <div class="form-group">
          <label for="bodyType">Tipo de Carroceria</label>
          <select
            id="bodyType"
            formControlName="bodyType"
            class="input-field"
          >
            <option value="">Selecione</option>
            @for (option of bodyTypeOptions; track option.value) {
              <option [value]="option.value">{{ option.label }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="engineType">Tipo de Motor</label>
          <select
            id="engineType"
            formControlName="engineType"
            class="input-field"
          >
            <option value="">Selecione</option>
            @for (option of engineTypeOptions; track option.value) {
              <option [value]="option.value">{{ option.label }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="seats">Quantidade de Lugares</label>
          <select
            id="seats"
            formControlName="seats"
            class="input-field"
          >
            <option [value]="null">Selecione</option>
            @for (seats of seatsOptions; track seats) {
              <option [value]="seats">{{ seats }}</option>
            }
          </select>
        </div>

        @if (errorMessage) {
          <app-error-message [message]="errorMessage" />
        }

        <div class="buttons">
          <app-button
            [text]="isEditMode ? 'Salvar' : 'Cadastrar'"
            [loadingText]="isEditMode ? 'Salvando...' : 'Cadastrando...'"
            [isLoading]="isLoading"
            [disabled]="vehicleForm.invalid"
            [type]="'submit'"
          />
          <app-button
            [text]="'Cancelar'"
            [type]="'button'"
            [variant]="'danger'"
            (clicked)="goBack()"
            [disabled]="isLoading"
          />
        </div>
      </form>
    </div>
  </div>

  <app-navigation />
</div>
